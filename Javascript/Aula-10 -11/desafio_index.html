<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Desafio Index</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>

<body class="container">
  <!-- init html code -->
  <p id="result" class="text-center mt-5"></p>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
    crossorigin="anonymous"></script>
  <!-- init js code -->
  <script>
    // https://www.w3schools.com/jsref/jsref_obj_array.asp
    // const numbers = [12, 3, 4, 5, 6, 7, 12, 12, 7, 8];
    const numbers = [12, 3, 4, 5, 6, 7, 12, 12, 7, 8, 12, 5, 3, 5, 2];

    /********************************************************************************
     *
     *       Desafio: Identificar o número mais repetido e apresente os seus índices
     *
     ********************************************************************************/
    //  0 6 7
    // '0,6,7'
    // [0,6,7]
    document.addEventListener('DOMContentLoaded', (event) => {
      solution();
    })

    /*
     * Variable to show
     */
    const max = {
      value: 0,
      indexes: []
    }

    const solution = () => {
      //  1: Sort array -> [3, 4, 5, 6, 7, 7, 8, 12, 12, 12]

      /*
      * The sort() method sorts the elements of an array.
      * The sort() method sorts the elements as strings in alphabetical and ascending order.
      * The sort() method overwrites the original array.
      */
      // let values = [...numbers];
      // values.sort((a, b) => a - b);

      /*
      * The toSorted() method sorts the elements of an array in alphabetical order.
      * The toSorted() method returns a new array.
      * The toSorted() method does not overwrite the original array.
      * The toSorted() method is the copying version of the sort() method.
      */
      let values = numbers.toSorted((a, b) => a - b);
      console.log(values);

      // 2: check if next number is iqual
      // max = {
      //   value: 12,
      //   indexes: [0,6,7]
      // }
      // max.value = 12;
      // max.indexes = [0,6,7]
      // Object.assign(
      //   max,
      //   {
      //     value: 12,
      //     indexes: [0, 6, 7]
      //   }
      // )

      for (let index = 0; index < values.length; index++) {
        const value = values[index];
        console.log(value);
        let countValue = 1;

        let compareIndex = 1;
        let condition = true
        do {
          const nextValue = values[index + compareIndex];
          if (value === nextValue) {
            compareIndex++;
            countValue++;
          } else {
            if (compareIndex > 1) {
              index += compareIndex - 1;
            }
            condition = false;
          }
        } while (condition);

        if (countValue > max.indexes.length) {
          Object.assign(
            max,
            {
              value: value,
              indexes: getNumberArrayIndexes(value)
            }
          )
        }
      }

      // 3: show in p tag the result
      document.getElementById('result').innerHTML = JSON.stringify(max);
    }

    const getNumberArrayIndexes = (value) => {
      return numbers.reduce((a, e, i) => {
        if (e === value) {
          a.push(i)
        }
        return a;
      }, [])

      // let a = [];
      // numbers.forEach((e, i) => {
      //   if (e === value) {
      //     a.push(i)
      //   }
      // });
      // return a;
    }
  </script>
</body>

</html>