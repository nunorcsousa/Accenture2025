<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FizzBuzz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>

<body class="container">
  <h3 class="text-center">FizzBuzz</h3>
  <label for="inputLoopCount" class="form-label">FizzBuzz Max Number : Enter a number between 1 and 100</label>
  <!-- FizzBuzz Form -->
  <form>
    <div class="form-group row">
      <input type="number" class="col-sm-8" id="inputLoopCount"
        onkeyup="checkValidNumber(event)">
      <button id="btnResolve" type="button" class="btn btn-success disabled col-sm-4"
        onclick="resolveFizzBuzz()">Resolve
        FizzBuzz</button>
    </div>
  </form>
  <!-- FizzBuzz list -->
  <ul id="fizzbuzz" class="list-group mt-3">
  </ul>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
    crossorigin="anonymous"></script>
  <!-- <script>
    // https://www.w3schools.com/js/js_operators.asp

    /*
      Given a positive integer from 1 to 40.
      But for multiples of 3 the array should have “Fizz”.
      For the multiples of 5, the array should have “Buzz”.
      For numbers which are multiple of 3 and 5 both, the array should have “FizzBuzz”.
    */

    let index = 0;
    while (index <= 40) {
      // let currString = 'Numero -' + index + " : ";
      let currString = `Numero - ${index} : `;
      let isToPrint = false;

      if (index % 3 === 0) {
        currString += "Fizz";
        isToPrint = true;
      }
      if (index % 5 === 0) {
        currString += "Buzz";
        isToPrint = true;
      }
      if (isToPrint) {
        console.log(currString);
      }
      index++;
    }
  </script> -->

  <!-- <script>
    for (let i = 0; i <= 40; i++) {
      if (i % 3 === 0 && i % 5 === 0) {
        console.log(i + "FizzBuzz");
      }
      else if (i % 3 === 0) {
        console.log(i + "Fizz");
      }
      else if (i % 5 === 0) {
        console.log(i + "Buzz");
      }
    }
  </script> -->

  <script>
    /*
      criar elemento html
        input: number
        btn resolve
      class FizzBuzz
        contructor param loops
        meth resolve fizzbuzz (console -> novo elemento html)
    */

    /*
      Class FizzBuzz
    */
    class FizzBuzz {
      constructor(loopCount) {
        this.loopCount = loopCount
      }

      res() {
        let index = 0;
        while (index <= this.loopCount) {
          let currString = `Numero - ${index} : `;
          let isToPrint = false;

          if (index % 3 === 0) {
            currString += "Fizz";
            isToPrint = true;
          }
          if (index % 5 === 0) {
            currString += "Buzz";
            isToPrint = true;
          }
          if (isToPrint) {
            // console.log(currString);
            addListItem(currString);
          }
          index++;
        }
      }
    }

    /**********
    * Methods *
    **********/

    // get loop count from input
    const getValueFromForm = () => document.getElementById('inputLoopCount').value;

    // create object from Fizzbuzzz class
    const createFizzBuzz = (getLoopCount) => new FizzBuzz(document.getElementById('inputLoopCount').value);

    // resolve fizzbuzz onclick
    const resolveFizzBuzz = () => {
      document.getElementById('fizzbuzz').innerHTML = '';
      const fizbuzzObj = createFizzBuzz(getValueFromForm());
      fizbuzzObj.res();
    }

    // add list item to list
    const addListItem = (value) => {
      document.getElementById('fizzbuzz').insertAdjacentHTML("beforeend", `<li class="list-group-item">${value}</li>`)
    }

    // check valid number and activate resolve button
    const checkValidNumber = (e) => {
      console.log(e);
      const currentValue = e.srcElement.value;
      const btnResolveEl = document.getElementById('btnResolve');
      if (btnResolveEl.classList.contains('disabled') && (currentValue > 0 && currentValue <= 100)) {
        btnResolveEl.classList.remove('disabled');
      } else if ((currentValue <= 0 || currentValue > 100) && !btnResolveEl.classList.contains('disabled')) {
        btnResolveEl.classList.add('disabled')
      }
    };
  </script>
</body>

</html>