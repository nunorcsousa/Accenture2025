<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>

<body>
  <div id="result"></div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
    crossorigin="anonymous"></script>
  <script>
    /***********************************************************************************
     *
     *       Desafio: Apresentar os valores ordenados de forma crescente
     *
     **********************************************************************************/
    // let data = [1, "2", [20, [4, "12", [6, "l4"], 3], ["5", "9"], 10], 8, 7];
    let data = [1, "2", [20, "12", [4, "12", [6, "l4"], 3], ["5", "qwerty", "9"], 10], 8, 7];

    let result = [];

    document.addEventListener('DOMContentLoaded', (event) => {
      returnNumbersFlatArray(data);

      document.getElementById('result').innerHTML = `<h3 class="text-center">${result.toString()}</h3>`
    })

    const returnNumbersFlatArray = (element) => {
      // // Dinamic flatArray
      // element = flatArray(element);
      // for (var i = 0; i < element.length; i++) {
      //     element[i] = parseInt(element[i]);
      //     if (isNaN(element[i]) === false) {
      //         result.push(element[i])
      //     }
      // }

      /**************************************
      * Convert all to Number and filter NaN
      **************************************/
      // result = element.flat(Infinity)
      //   .map(Number)
      //   .filter((el) => !isNaN(el))
      //   .sort((a, b) => a - b);

      /****************************************************
      * Try to retrieve digits from strings and filter NaN
      ****************************************************/
      result = element.flat(Infinity)
        .map((e) => (typeof e === 'string') ? parseInt(e.replace(/\D/g, "")) : e)
        .filter((el) => !isNaN(el))
        .sort((a, b) => a - b);


    }

    const flatArray = (element) => {
      for (var i = 0; i < element.length; i++) {
        if (typeof (element[i]) === "object" && element[i].length >= 0) {
          element = flatArray(element.flat());
        }
      }
      return element;
    }

    const flatArrayLocal = (a) => {
      const res = [];
      for (let index = 0; index < a.length; index++) {
        let element = a[index];
        switch (typeof element) {
          case 'string':
            // element = parseInt(element);
            element = parseInt(element.replace(/\D/g, ""));
          case 'number':
            res.push(element);
            break;
          case 'object':
            res.push(...flatArrayLocal(element));
            break;
        }
      }
      return res;
    }

  </script>
</body>

</html>